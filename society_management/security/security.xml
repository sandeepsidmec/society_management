<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <data>
        <record id="module_society_category" model="ir.module.category">
            <field name="name">Society</field>
            <field name="sequence">1</field>
            <field name="description">Society Management Category</field>
        </record>

        <record id="group_society_admin" model="res.groups">
            <field name="name">Society_Admin</field>
            <field name="category_id" ref="society_management.module_society_category"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="group_society_owner" model="res.groups">
            <field name="name">Owner</field>
            <field name="category_id" ref="society_management.module_society_category"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="group_society_tenant" model="res.groups">
            <field name="name">Tenant</field>
            <field name="category_id" ref="society_management.module_society_category"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>


        <record model="ir.rule" id="tenant_read_own_record">
            <field name="name">Tenant: Read only own record</field>
            <field name="model_id" ref="society_management.model_society_tenant"/>
            <field name="domain_force">[('tenant_id.id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('society_management.group_society_tenant'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record model="ir.rule" id="rent_tenant_only_own_apartment">
            <field name="name">Tenant: Access only their own rent records</field>
            <field name="model_id" ref="society_management.model_society_rent"/>
            <field name="domain_force">[('r_tenant_id.tenant_id.id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('society_management.group_society_tenant'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record id="apartment_tenant_rule" model="ir.rule">
            <field name="name">Tenant Apartment Restriction</field>
            <field name="model_id" ref="society_management.model_society_apartment"/>
            <field name="groups" eval="[(4, ref('society_management.group_society_tenant'))]"/>
            <field name="domain_force">[('tenant_id.tenant_id.id', '=', user.partner_id.id)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record id="parking_tenant_rule" model="ir.rule">
            <field name="name">Tenant Parking Restriction</field>
            <field name="model_id" ref="society_management.model_society_parking"/>
            <field name="groups" eval="[(4, ref('society_management.group_society_tenant'))]"/>
            <field name="domain_force">[('tenant_id.tenant_id.id', '=', user.partner_id.id)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record id="parking_owner_rule" model="ir.rule">
            <field name="name">Tenant Owner Restriction</field>
            <field name="model_id" ref="society_management.model_society_owner"/>
            <field name="groups" eval="[(4, ref('society_management.group_society_tenant'))]"/>
            <field name="domain_force">[
                ('owner_apart_ids.tenant_id.tenant_id.id', '=', user.partner_id.id)
                ]
            </field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>


    </data>
</odoo>